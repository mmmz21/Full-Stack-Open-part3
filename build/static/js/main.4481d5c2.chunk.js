(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{15:function(e,n,t){e.exports=t(38)},20:function(e,n,t){},38:function(e,n,t){"use strict";t.r(n);var a=t(0),c=t.n(a),o=t(14),r=t.n(o),u=(t(5),t(2)),l=(t(20),function(e){var n=e.addInfo,t=e.newName,a=e.handleNameChange,o=e.newNumber,r=e.handleNumberChange;return c.a.createElement("div",null,c.a.createElement("form",{onSubmit:n},c.a.createElement("div",null,"name: ",c.a.createElement("input",{value:t,onChange:a})),c.a.createElement("div",null,"number: ",c.a.createElement("input",{value:o,onChange:r})),c.a.createElement("div",null,c.a.createElement("button",{type:"submit"},"add"))))}),i=function(e){var n=e.filter,t=e.handleFilterChange;return c.a.createElement("div",null,c.a.createElement("p",null,"filter shown with a ",c.a.createElement("input",{value:n,onChange:t})))},d=t(3),m=t.n(d),s="/api/persons",f=function(){return m.a.get(s).then((function(e){return e.data}))},h=function(e){return m.a.post(s,e).then((function(e){return e.data}))},b=function(e,n){return m.a.put("".concat(s,"/").concat(e),n).then((function(e){return e.data}))},E=function(e){return m.a.delete("".concat(s,"/").concat(e)).then((function(e){return e.data}))},v=function(){var e=Object(a.useState)([]),n=Object(u.a)(e,2),t=n[0],o=n[1],r=Object(a.useState)(""),d=Object(u.a)(r,2),m=d[0],s=d[1],v=Object(a.useState)(""),p=Object(u.a)(v,2),w=p[0],g=p[1],j=Object(a.useState)(""),O=Object(u.a)(j,2),C=O[0],N=O[1],k=Object(a.useState)(""),y=Object(u.a)(k,2),S=y[0],T=y[1],D=Object(a.useState)(""),I=Object(u.a)(D,2),M=I[0],F=I[1];Object(a.useEffect)((function(){f().then((function(e){console.log("promise fulfilled"),o(e)}))}),[]);var J=function(e){e.error_message,e.success_message;return S?c.a.createElement("div",{className:"error"}," ",S," "):M?c.a.createElement("div",{className:"success"}," ",M," "):null},L=function(){return(""===C?t:t.filter((function(e){return e.name.toLowerCase().includes(C.toLowerCase())}))).map((function(e){return c.a.createElement("div",{key:e.id}," ",e.name," ",e.number,c.a.createElement("button",{onClick:function(){return n=e.id,t=e.name,void(window.confirm("Delete ".concat(t,"?"))&&E(n).then((function(e){window.location.reload(),F("".concat(t," was deleted")),setTimeout((function(){F(null)}),5e3)})).catch((function(e){T("the person ".concat(t," was already deleted from server")),setTimeout((function(){T(null)}),5e3)})));var n,t}}," Delete"))}))};return c.a.createElement("div",null,c.a.createElement("h2",null,"Phonebook"),c.a.createElement(J,{errorMessage:S,successMessage:M}),c.a.createElement("div",null,c.a.createElement(i,{filter:C,handleFilterChange:function(e){N(e.target.value)}})),c.a.createElement("h2",null," Add a new: "),c.a.createElement(l,{addInfo:function(e){var n,a;(e.preventDefault(),t.filter((function(e){return e.name===m&&(n=e.id),e.name===m})).length>0)?window.confirm("".concat(m," is already added to phonebook, replace the old number with new one?"))&&(a=m,b(n,{name:m,number:w}).then((function(e){s(""),g(""),window.location.reload(),F("".concat(a," was updated")),setTimeout((function(){T(null)}),5e3)})).catch((function(e){T("".concat(a," cannot be updated because they have already been deleted from the phonebook")),setTimeout((function(){T(null)}),5e3)}))):h({name:m,number:w}).then((function(e){o(t.concat(e)),s(""),g(""),window.location.reload(),F("".concat(m," was added")),setTimeout((function(){F(null)}),5e3)})).catch((function(e){T("".concat(m," could not be added. Please try again.")),setTimeout((function(){T(null)}),5e3)}))},newName:m,handleNameChange:function(e){s(e.target.value)},newNumber:w,handleNumberChange:function(e){g(e.target.value)}}),c.a.createElement("h2",null,"Numbers"),c.a.createElement("div",null," ",c.a.createElement(L,{persons:t,filter:C})," "))};r.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(v,null)),document.getElementById("root"))},5:function(e,n,t){}},[[15,1,2]]]);
//# sourceMappingURL=main.4481d5c2.chunk.js.map